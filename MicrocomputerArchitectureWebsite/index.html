<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Architecture of Microcomputers</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body class="home" >

	<header>
		<nav>
			<input type="checkbox" id="menu-toggle" class="menu-toggle">
			<label for="menu-toggle" class="hamburger">&#9776;</label>
			<ul>
				<li><a href="index.html">Home</a></li>
				<li><a href="iodevices.html">I/O</a></li>
				<li><a href="components.html">Components</a></li>
				<li><a href="applications.html">Applications</a></li>
				<li><a href="aboutus.html">About us</a></li>
			</ul>
		</nav>
		<div>
			<img id="mute-button" src="images/Mute button/Sound On.png" alt="Mute Button">
		</div>
	</header>

	<div id="popup" class="popup">
		<div class="popup-content">
			<p>Click on the computer or the links in the navigation bar to navigate through the site.</p>
			<button id="popup-ok">OK</button>
		</div>
	</div>
	
	<div class="parallax-container">

		<div class="parallax-layer" id="tree_left_back"></div>
		<div class="parallax-layer" id="tree_left_front"></div>
		<div class="parallax-layer" id="tree_right_back"></div>
		<div class="parallax-layer" id="tree_right_front"></div>
		<div class="parallax-layer" id="desk"></div>
		<div class="parallax-layer" id="phallus"></div>
		<div class="parallax-layer" id="keyboard"></div>

	</div>

	<script>
		// Elements
		const audio = new Audio('audio/20150917_Undertale OST： 006 - Uwa!! So Temperate♫.mp3');
		const muteButton = document.getElementById('mute-button');
		const phallus = document.getElementById('phallus');
		const hamburger = document.querySelector('.hamburger');
		const navMenu = document.querySelector('nav ul');
		const componentsLink = document.querySelector('nav ul li a[href="components.html"]');
		const iodevicesLink = document.querySelector('nav ul li a[href="iodevices.html"]');
		const popup = document.getElementById('popup');
		const popupOkButton = document.getElementById('popup-ok');
	
		// Preload images
		const images = [
			'images/HomepageMascotSprites/spaced/ComputyEyesClosedBS.png',
			'images/HomepageMascotSprites/spaced/ComputyNoScreenBS.png',
			'images/HomepageMascotSprites/spaced/ComputyDefaultBS.png'
		];
	
		// Create Image objects to preload
		images.forEach(src => {
			const img = new Image();
			img.src = src;
		});
	
		// Audio Setup
		audio.loop = true;
		audio.preload = 'auto';
	
		function playAudio() {
			audio.play().catch(err => console.error('Audio play error:', err));
			document.removeEventListener('click', playAudio);
			document.removeEventListener('keydown', playAudio);
		}
	
		window.addEventListener('load', () => {
			audio.play().catch(() => {
				console.log('Autoplay blocked; waiting for user interaction.');
			});
		});
	
		document.addEventListener('click', playAudio);
		document.addEventListener('keydown', playAudio);
	
		// Mute/Unmute Toggle
		muteButton.addEventListener('click', () => {
			audio.muted = !audio.muted;
			muteButton.src = audio.muted ? 'images/Mute button/Sound Off.png' : 'images/Mute button/Sound On.png';
		});
	
		// Parallax Effect
		document.addEventListener('mousemove', (e) => {
			const x = (e.clientX - window.innerWidth / 2) / window.innerWidth;
			const y = (e.clientY - window.innerHeight / 2) / window.innerHeight;
			const layers = {
				treeLeftBack: document.getElementById('tree_left_back'),
				treeLeftFront: document.getElementById('tree_left_front'),
				treeRightBack: document.getElementById('tree_right_back'),
				treeRightFront: document.getElementById('tree_right_front')
			};
	
			layers.treeLeftBack.style.transform = `translate(${x * 4}px, ${y * 4}px)`;
			layers.treeLeftFront.style.transform = `translate(${x * 8}px, ${y * 8}px)`;
			layers.treeRightBack.style.transform = `translate(${x * 4}px, ${y * 4}px)`;
			layers.treeRightFront.style.transform = `translate(${x * 8}px, ${y * 8}px)`;
		});
	
		// Show Popup Prompt
		window.addEventListener('load', () => {
			setTimeout(() => {
				popup.style.display = 'flex'; // Show the popup
			}, 500);
		});
	
		// Close Popup
		popupOkButton.addEventListener('click', () => {
			popup.style.display = 'none';
		});
	
		// Blinking Animation (Changing Sprite)
		let blinkInterval; // Store the interval to stop blinking later
	
		function blinkEffect() {
			blinkInterval = setInterval(() => {
				// Change sprite to eyes closed
				phallus.style.backgroundImage = `url(images/HomepageMascotSprites/spaced/ComputyEyesClosedBS.png)`;
	
				// After a random time between 300ms and 700ms (simulate blink), change back to eyes open
				setTimeout(() => {
					phallus.style.backgroundImage = `url(images/HomepageMascotSprites/spaced/ComputyDefaultBS.png)`;
				}, 300); // Duration of closed eyes before switching back
			}, Math.floor(Math.random() * 4000) + 3000); // Random blink interval between 3-7 seconds (3000-7000ms)
		}
	
		// Set the initial image (ensure visibility before blink starts)
		phallus.style.backgroundImage = `url(images/HomepageMascotSprites/spaced/ComputyDefaultBS.png)`;
	
		// Start blinking after page load
		window.addEventListener('load', blinkEffect);
	
		// Stop blinking when clicked
		phallus.addEventListener('click', (e) => {
			// Stop blinking
			clearInterval(blinkInterval);
			
			// Zoom and Redirect to the components page
			zoomAndRedirect('components.html');
		});
	
		// Zoom and Redirect Logic
		function zoomAndRedirect(targetUrl) {
			phallus.classList.add('zoomed');
	
			setTimeout(() => {
				phallus.style.backgroundImage = `url(images/HomepageMascotSprites/spaced/ComputyNoScreenBS.png)`;
			}, 500);
	
			setTimeout(() => {
				window.location.href = targetUrl;
			}, 2000);
		}
	
		// Event Listeners for Links
		componentsLink.addEventListener('click', (e) => {
			e.preventDefault();
			zoomAndRedirect('components.html');
		});
	
		iodevicesLink.addEventListener('click', (e) => {
			e.preventDefault();
			zoomAndRedirect('iodevices.html');
		});
	
		// Hamburger Menu Toggle
		hamburger.addEventListener('click', () => {
			navMenu.classList.toggle('show');
		});
	</script>
	
	

</body>
</html>
